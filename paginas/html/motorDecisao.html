<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Motor de Decisão - RRIA</title>
    <link rel="stylesheet" href="../css/motorDecisao.css">
    <link rel="stylesheet" href="../css/shared-header.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
</head>

<body>
    <div class="app-container">
        <header class="ops-header">
            <div class="header-content">
                <div class="header-title">
                    <h1>Motor de Decisão</h1>
                    <p>Como um app recalcula rotas em tempo real</p>
                </div>

                <button onclick="window.location.href='../../mapa.html'"
                    style="background:none; border:none; cursor:pointer; color:#666;">
                    <span class="material-icons-round">arrow_back</span>
                </button>
            </div>
        </header>

        <div class="main-layout">
            <div class="card flowchart-container" id="flowchart">
                <h3 class="card-title">
                    <svg class="card-icon" viewBox="0 0 24 24">
                        <path
                            d="M21.71,11.29L12.71,2.29C12.32,1.9 11.69,1.9 11.3,2.29L2.3,11.29C1.91,11.68 1.91,12.32 2.3,12.71L11.3,21.71C11.69,22.1 12.32,22.1 12.71,21.71L21.71,12.71C22.1,12.32 22.1,11.68 21.71,11.29M7,12L12,7L17,12L12,17L7,12Z" />
                    </svg>
                    Fluxo de Processamento
                </h3>
                <div class="flow-steps">
                    <div class="flow-step" data-step="1">
                        <span class="flow-step-number">1</span>
                        <span class="flow-step-text">Solicitação de Rota</span>
                    </div>
                    <div class="flow-step" data-step="2">
                        <span class="flow-step-number">2</span>
                        <span class="flow-step-text">Rota Definida</span>
                    </div>
                    <div class="flow-step" data-step="3">
                        <span class="flow-step-number">3</span>
                        <span class="flow-step-text">Identificação de Eventos</span>
                    </div>
                    <div class="flow-step" data-step="4">
                        <span class="flow-step-number">4</span>
                        <span class="flow-step-text">Recalcular Rota</span>
                    </div>
                    <div class="flow-step" data-step="5">
                        <span class="flow-step-number">5</span>
                        <span class="flow-step-text">Rota Final Entregue</span>
                    </div>
                    <div class="flow-step" data-step="6">
                        <span class="flow-step-number">6</span>
                        <span class="flow-step-text">Destino Alcançado</span>
                    </div>
                </div>
            </div>

            <div class="card map-container">
                <h3 class="card-title">
                    <svg class="card-icon" viewBox="0 0 24 24">
                        <path
                            d="M15,19L9,16.89V5L15,7.11M20.5,3C20.44,3 20.39,3 20.34,3L15,5.1L9,3L3.36,4.9C3.15,4.97 3,5.15 3,5.38V20.5A0.5,0.5 0 0,0 3.5,21C3.55,21 3.61,21 3.66,20.97L9,18.9L15,21L20.64,19.1C20.85,19 21,18.85 21,18.62V3.5A0.5,0.5 0 0,0 20.5,3Z" />
                    </svg>
                    Simulação de Rota
                </h3>
                <div class="map-wrapper">
                    <svg viewBox="0 0 900 600" id="decision-map">
                        <rect width="900" height="600" fill="#ebeef1" />

                        <g fill="none" stroke-linecap="round">
                            <path d="M0,150 L900,150" stroke="#ced4da" stroke-width="36" />
                            <path d="M0,150 L900,150" stroke="#ffffff" stroke-width="32" />

                            <path d="M0,300 L900,300" stroke="#ced4da" stroke-width="36" />
                            <path d="M0,300 L900,300" stroke="#ffffff" stroke-width="32" />
                            <path d="M0,300 L900,300" stroke="#f8f9fa" stroke-width="2" stroke-dasharray="12 8" />

                            <path d="M0,450 L900,450" stroke="#ced4da" stroke-width="36" />
                            <path d="M0,450 L900,450" stroke="#ffffff" stroke-width="32" />

                            <path d="M300,0 L300,600" stroke="#ced4da" stroke-width="32" />
                            <path d="M300,0 L300,600" stroke="#ffffff" stroke-width="28" />

                            <path d="M600,0 L600,600" stroke="#ced4da" stroke-width="32" />
                            <path d="M600,0 L600,600" stroke="#ffffff" stroke-width="28" />
                        </g>

                        <!-- Rotas invisíveis -->
                        <path id="route-initial" d="M100,300 L800,300" fill="none" stroke="none" />
                        <path id="route-to-col1" d="M100,300 L300,300" fill="none" stroke="none" />
                        <path id="route-top" d="M300,300 L300,150 L600,150 L600,300 L800,300" fill="none"
                            stroke="none" />
                        <path id="route-bottom" d="M300,300 L300,450 L600,450 L600,300 L800,300" fill="none"
                            stroke="none" />

                        <path id="route-phase1" d="" stroke="#7c3aed" stroke-width="6" fill="none"
                            stroke-linecap="round" stroke-dasharray="0" opacity="0.85" />
                        <path id="route-phase2" d="" stroke="#7c3aed" stroke-width="6" fill="none"
                            stroke-linecap="round" stroke-dasharray="0" opacity="0.85" />

                        <g id="event-icons"></g>

                        <g id="start-point" transform="translate(100, 300)">
                            <circle r="18" fill="rgba(40, 200, 64, 0.2)" />
                            <circle r="12" fill="rgba(40, 200, 64, 0.4)" />
                            <circle r="8" fill="#28c840" stroke="#fff" stroke-width="2" />
                            <text y="35" text-anchor="middle" fill="#495057" font-size="11"
                                font-weight="600">INÍCIO</text>
                        </g>

                        <g id="end-point" transform="translate(800, 300)">
                            <circle r="18" fill="rgba(244, 67, 54, 0.2)" />
                            <circle r="12" fill="rgba(244, 67, 54, 0.4)" />
                            <circle r="8" fill="#f44336" stroke="#fff" stroke-width="2" />
                            <text y="35" text-anchor="middle" fill="#495057" font-size="11"
                                font-weight="600">DESTINO</text>
                        </g>

                        <g id="car-marker" transform="translate(100, 300) scale(0)">
                            <circle r="14" fill="rgba(90, 153, 212, 0.3)" />
                            <path d="M0,-12 L8,8 L0,4 L-8,8 Z" fill="#5a99d4" stroke="#fff" stroke-width="2" />
                        </g>
                    </svg>
                </div>
            </div>

            <div class="card events-container">
                <h3 class="card-title">
                    <svg class="card-icon" viewBox="0 0 24 24">
                        <path d="M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z" />
                    </svg>
                    Simular Eventos
                </h3>
                <button class="event-btn" data-event="obra" id="btn-obra">
                    <svg class="event-icon" viewBox="0 0 24 24">
                        <path
                            d="M20,18C20,18.56 19.56,19 19,19H5C4.44,19 4,18.56 4,18V14H5.5V12H4V8C4,7.44 4.44,7 5,7H9.5V5.5H10.5V7H13.5V5.5H14.5V7H19C19.56,7 20,7.44 20,8V12H18.5V14H20V18M14,14H10V12H14V14Z" />
                    </svg>
                    <span>Obra Inesperada</span>
                </button>
                <button class="event-btn" data-event="acidente" id="btn-acidente">
                    <svg class="event-icon" viewBox="0 0 24 24">
                        <path d="M12,2L1,21H23M12,6L19.53,19H4.47M11,10V14H13V10M11,16V18H13V16" />
                    </svg>
                    <span>Acidente</span>
                </button>
                <button class="event-btn" data-event="bloqueio" id="btn-bloqueio">
                    <svg class="event-icon" viewBox="0 0 24 24">
                        <path
                            d="M12,1L3,5V11C3,16.55 6.84,21.74 12,23C17.16,21.74 21,16.55 21,11V5L12,1M12,7C13.4,7 14.8,8.1 14.8,9.5V11C15.4,11 16,11.6 16,12.3V15.8C16,16.4 15.4,17 14.7,17H9.2C8.6,17 8,16.4 8,15.7V12.2C8,11.6 8.6,11 9.2,11V9.5C9.2,8.1 10.6,7 12,7M12,8.2C11.2,8.2 10.5,8.7 10.5,9.5V11H13.5V9.5C13.5,8.7 12.8,8.2 12,8.2Z" />
                    </svg>
                    <span>Rota Bloqueada</span>
                </button>
                <button class="event-btn" data-event="clima" id="btn-clima">
                    <svg class="event-icon" viewBox="0 0 24 24">
                        <path
                            d="M6,14.03A1,1 0 0,1 7,15.03C7,15.58 6.55,16.03 6,16.03C3.24,16.03 1,13.79 1,11.03C1,8.27 3.24,6.03 6,6.03C7,3.68 9.3,2.03 12,2.03C15.43,2.03 18.24,4.69 18.5,8.06L19,8.03A4,4 0 0,1 23,12.03C23,14.23 21.21,16.03 19,16.03H18C17.45,16.03 17,15.58 17,15.03C17,14.47 17.45,14.03 18,14.03H19A2,2 0 0,0 21,12.03A2,2 0 0,0 19,10.03H17V9.03C17,6.27 14.76,4.03 12,4.03C9.5,4.03 7.45,5.84 7.06,8.21C6.73,8.09 6.37,8.03 6,8.03A3,3 0 0,0 3,11.03A3,3 0 0,0 6,14.03Z" />
                    </svg>
                    <span>Cond. Climática</span>
                </button>
                <button class="btn-start" id="btn-start">
                    <svg style="width:20px;height:20px;fill:white" viewBox="0 0 24 24">
                        <path d="M8,5.14V19.14L19,12.14L8,5.14Z" />
                    </svg>
                    <span>Iniciar Viagem</span>
                </button>
                <button class="btn-clear" id="btn-clear">
                    <svg style="width:20px;height:20px;fill:white" viewBox="0 0 24 24">
                        <path
                            d="M19.36,2.72L20.78,4.14L15.06,9.85C16.13,11.39 16.28,13.24 15.38,14.44L9.06,8.12C10.26,7.22 12.11,7.37 13.65,8.44L19.36,2.72M5.93,17.57C3.92,15.56 2.69,13.16 2.35,10.92L7.23,8.83L14.67,16.27L12.58,21.15C10.34,20.81 7.94,19.58 5.93,17.57Z" />
                    </svg>
                    <span>Limpar Simulação</span>
                </button>
            </div>
        </div>
    </div>

    <script src="../js/motorDecisao.js"></script>
</body>

</html>